<div class="admin-layout d-flex flex-column justify-content-center align-items-center min-vh-100">
  <div class="admin-content w-100 d-flex justify-content-center align-items-center py-4">
    <div class="table-responsive" style="max-width: 1000px; width: 100%;">
      <div class="table-wrapper shadow rounded-3 p-4 bg-white">
        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
          <h2 class="mb-0">Gestión de usuarios de SuscripTrack</h2>
          <div class="search-box position-relative">
            <i class="material-icons position-absolute top-50 start-0 translate-middle-y ms-2 text-secondary">search</i>
            <input type="text" class="form-control ps-5 rounded-pill" placeholder="Search...">
          </div>
        </div>

        <table class="table table-hover table-bordered align-middle">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Username</th>
              <th>Name</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.username }}</td>
              <td>{{ user.name }}</td>
              <td class="text-center">
                <!-- Botón View -->
                <button (click)="openUserModal(user)" class="btn btn-link text-info p-0 m-0" title="View">
                  <i class="material-icons">visibility</i>
                </button>

                <!-- Botón Edit -->
                <a routerLink="/admin/user-mng-edit" class="text-warning me-2" title="Edit">
                  <i class="material-icons">edit</i>
                </a>

                <!-- Botón Delete -->
                <button (click)="confirmDelete(user)" class="btn btn-link text-danger p-0 m-0" title="Delete">
                  <i class="material-icons">delete</i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <p *ngIf="error" class="text-danger mt-2">{{ error }}</p>

        <div class="d-flex justify-content-between align-items-center mt-3 flex-wrap gap-2">
          <div class="hint-text">Total users: <b>{{ users.length }}</b></div>
          <ul class="pagination mb-0">
            <li class="page-item disabled">
              <a href="#" class="page-link">
                <i class="fa fa-angle-double-left"></i>
              </a>
            </li>
            <li class="page-item active"><a href="#" class="page-link">1</a></li>
            <li class="page-item"><a href="#" class="page-link">2</a></li>
            <li class="page-item">
              <a href="#" class="page-link">
                <i class="fa fa-angle-double-right"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de visualización -->
<div class="modal fade" id="viewUserModal" tabindex="-1" aria-labelledby="viewUserModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewUserModalLabel">Información del usuario</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <p><strong>ID:</strong> {{ selectedUser?.id }}</p>
        <p><strong>Username:</strong> {{ selectedUser?.username }}</p>
        <p><strong>Name:</strong> {{ selectedUser?.name }}</p>
        <p><strong>Roles:</strong> {{ getRolesAsText(selectedUser) }}</p>
      </div>
    </div>
  </div>
</div>
